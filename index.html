<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Testing Geospatial Data</title>
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">
  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/js/materialize.min.js"></script>
  <!-- Mapbox -->
  <script src='https://api.mapbox.com/mapbox-gl-js/v0.47.0/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v0.47.0/mapbox-gl.css' rel='stylesheet' />
  <!-- Turf -->
  <script src='https://npmcdn.com/@turf/turf/turf.min.js'></script>
  <style>
    body {
      margin: 0;
      padding: 0;
    }

    #map {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 100%;
    }

  </style>
</head>

<body>
  <style>
    .mapboxgl-popup {
      max-width: 400px;
      font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    }

  </style>
  <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.3.0/mapbox-gl-geocoder.min.js'></script>
  <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.3.0/mapbox-gl-geocoder.css' type='text/css' />
  <div id='map' style='width: 100%; height: 980px;'></div>
  <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoiYXJveGFuIiwiYSI6ImNqbG0xZnpmNjEzbWMzcXFtd2VoMjk5cXgifQ.rPOo5foRV5NzPHrOvX53NA';
    var map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/mapbox/streets-v10?optimize=true',
      zoom: 11,
      center: [-104.881105, 39.76185],
      renderWorldCopies: false
    });
    var hoveredStateId = null;
    // Add zoom and rotation controls to the map.
    map.addControl(new MapboxGeocoder({
      accessToken: mapboxgl.accessToken
    }));
    map.addControl(new mapboxgl.NavigationControl());


    map.on('load', function() {
      map.addSource('united', {
        'type': 'geojson',
        'data': 'USNeighborhoods.geojson'
      });

      map.addLayer({
        'id': 'zwillo-fills',
        'type': 'fill',
        'source': 'united',
        'layout': {},
        'paint': {
          'fill-color': '#627BC1',
          'fill-outline-color': 'rgba(200, 100, 240, 1)'
        }
      });
      // When a click event occurs on a feature in the states layer, open a popup at the
      // location of the click, with description HTML from its properties.
      map.on('click', 'zwillo-fills', function(e) {
        new mapboxgl.Popup()
          .setLngLat(e.lngLat)
          .setHTML(
            `Neighberhood - ${e.features[0].properties.Name} <br /> County - ${e.features[0].properties.County} <br /> Region ID - ${e.features[0].properties.RegionID} <br /> City - ${e.features[0].properties.City} <br /> State - ${e.features[0].properties.State}`
          )
          .addTo(map);
      });

      // Change the cursor to a pointer when the mouse is over the states layer.
      map.on('mouseenter', 'zwillo-fills', function() {
        map.getCanvas().style.cursor = 'pointer';
      });

      // Change it back to a pointer when it leaves.
      map.on('mouseleave', 'zwillo-fills', function() {
        map.getCanvas().style.cursor = '';
      });
    });

  </script>

</body>

</html>
